import{_ as a,r as t,o as i,c as o,a as n,b as l,e as d,d as s}from"./app.6e5a8480.js";const c={},p=d(`<h1 id="nginx\u5B98\u65B9\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#nginx\u5B98\u65B9\u6A21\u5757" aria-hidden="true">#</a> Nginx\u5B98\u65B9\u6A21\u5757</h1><ul><li><p><code>--with-http_stub_status_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u76D1\u63A7Nginx\u670D\u52A1\u5668\u7684\u8FDE\u63A5\u72B6\u6001</td><td><code>stub_status</code></td><td><code>server, location</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code> <span class="token directive"><span class="token keyword">location</span> /status</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">stub_status</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5907\u6CE8</p><p>\u8BBF\u95EEhttp://host/status\u5373\u53EF\u770B\u5230\u5F53\u524DNginx\u8FDE\u63A5\u72B6\u6001</p></li></ul></li><li><p><code>--with-http_random_index_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u4ECE\u76EE\u5F55\u4E2D\u968F\u673A\u9009\u53D6\u4E00\u4E2A\u9875\u9762\u4F5C\u4E3A\u4E3B\u9875</td><td><code>random_index on|off</code></td><td><code>location</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /www</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">random_index</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5907\u6CE8</p><p>\u4E0D\u4F1A\u968F\u673A\u5230\u9690\u85CF\u6587\u4EF6</p></li></ul></li><li><p><code>--with-http_sub_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>HTTP\u5185\u5BB9\u66FF\u6362</td><td><code>sub_filter &#39;old_str&#39; &#39;new_str&#39; </code><br><code>sub_filter_last_modified on|off</code><br><code>sub_filter_once on|off</code></td><td><code>http, server, location</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /www</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">sub_filter</span> <span class="token string">&#39;old&#39;</span> <span class="token string">&#39;new&#39;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">sub_filter_once</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># \u8BBE\u7F6E\u4E3Aon\u65F6\uFF0C\u53EA\u66FF\u6362\u5339\u914D\u5230\u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\uFF1B\u8BBE\u7F6E\u4E3Aoff\u65F6\uFF0C\u66FF\u6362\u5339\u914D\u5230\u7684\u6240\u6709\u5B57\u7B26</span>
    <span class="token comment"># sub_filter_last_modified off; # \u7528\u4E8E\u6821\u9A8C\u6BCF\u4E00\u6B21\u8BF7\u6C42\u65F6\u9875\u9762\u662F\u5426\u53D1\u751F\u6539\u53D8</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><code>-limit_conn_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u8FDE\u63A5\u9891\u7387\u9650\u5236</td><td>1. <code>limit_conn_zone key zone=name:size;</code><br>2.<code>limit_conn zone number;</code></td><td>1.<code>http</code><br>2.<code>http, server, location</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">limit_conn_zone</span> <span class="token variable">$remote_addr</span> zone=conn_zone:1m</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   /www</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">limit_conn</span> conn_zone <span class="token number">5</span></span><span class="token punctuation">;</span> <span class="token comment"># 5\u540C\u4E00\u65F6\u95F4\u7684\u6700\u5927\u8FDE\u63A5\u6570</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><code>-limit_req_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u8BF7\u6C42\u9891\u7387\u9650\u5236</td><td>1. <code>limit_req_zone key zone=name:size;</code><br>2.<code>limit_req zone=name [burst=number] [nodelay | delay=number];</code></td><td>1.<code>http</code><br>2.<code>http, server, location</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">limit_req_zone</span> <span class="token variable">$binary_remote_addr</span> zone=req_zone:10m rate=1r/s</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">location</span> /search/</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">limit_req</span> zone=req_zone burst=5</span><span class="token punctuation">;</span> <span class="token comment"># \u8D85\u8FC7\u8BF7\u6C42\u901F\u7387\u7684\u8BF7\u6C42\u5C06\u88AB\u5EF6\u8FDF\u8BF7\u6C42\uFF0C\u4E14\u5EF6\u8FDF\u8BF7\u6C42\u4E0D\u8D85\u8FC75\u4E2A</span>
            							  <span class="token comment"># delay\u9ED8\u8BA4\u4E3A0\uFF0C\u5373\u6240\u6709\u591A\u4F59\u7684\u8BF7\u6C42\u90FD\u4F1A\u88AB\u5EF6\u8FDF</span>
            <span class="token comment"># limit_req zone=req_zone burst=5 nodelay; # \u5982\u679C\u4E0D\u5E0C\u671B\u591A\u4F59\u7684\u8BF7\u6C42\u88AB\u5EF6\u8FDF\uFF0C\u53EF\u4EE5\u4F7F\u7528nodelay</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><code>-http_access_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u57FA\u4E8EIP\u7684\u8BBF\u95EE\u63A7\u5236</td><td>1. <code>allow\xA0address | CIDR | unix: | all</code><br>2.<code>deny address |\xA0CIDR |\xA0unix: |\xA0all</code></td><td><code>http, server, location, limit_except</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span>  ~^/admin.html</span>  <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">deny</span>  192.168.1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 192.168.1.0/24</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 10.1.1.0/16</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">allow</span> 2001:0db8::/32</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">deny</span>  all</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><code>-http_auth_basic_module</code></p><ul><li><p>\u6982\u8FF0</p><table><thead><tr><th>\u7528\u9014</th><th>\u8BED\u6CD5</th><th>\u914D\u7F6E\u4F4D\u7F6E</th></tr></thead><tbody><tr><td>\u57FA\u4E8E\u7528\u6237\u7684\u4FE1\u4EFB\u767B\u9646</td><td>1. <code>auth_basic string|off;</code><br>2.<code>auth_basic_user_file file;</code></td><td><code>http, server, location, limit_except</code></td></tr></tbody></table></li><li><p>\u4E3E\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">auth_basic</span>           <span class="token string">&quot;admin site&quot;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">auth_basic_user_file</span> conf/htpasswd</span><span class="token punctuation">;</span> <span class="token comment"># \u4FDD\u5B58\u8BA4\u8BC1\u4FE1\u606F\u7684\u6587\u4EF6</span>
    								 <span class="token comment"># \u53EF\u4F7F\u7528&quot;htpasswd&quot;\u5DE5\u5177\u751F\u6210\u8BE5\u6587\u4EF6</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><hr><p>###\u53C2\u8003\u94FE\u63A5</p>`,4),r={href:"http://nginx.org/en/docs/",target:"_blank",rel:"noopener noreferrer"},u=s("Nginx\u5B98\u65B9\u6587\u6863"),v=s("\u3002");function k(m,b){const e=t("ExternalLinkIcon");return i(),o("div",null,[p,n("ul",null,[n("li",null,[n("a",r,[u,l(e)]),v])])])}var _=a(c,[["render",k],["__file","Nginx\u5B98\u65B9\u6A21\u5757.html.vue"]]);export{_ as default};
